<%- include('../userPartials/header'); %>

<!-- home page -->

<style>
  .header-slider img,
  .header-img img {
    width: 100%;
    height: 400px; /* Set this to your desired height */
    object-fit: cover; /* Ensures the images cover the area without distortion */
  }

  .header-img .img-item {
    margin-bottom: 20px; /* Add some space between additional images */
  }

  .header-slider-item,
  .header-img .img-item {
    position: relative;
  }

  .header-slider-caption,
  .img-text {
    position: absolute;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    color: #fff;
    width: 100%;
    text-align: center;
    padding: 10px;
  }
</style>
<!-- Main Slider Start -->
<div class="header">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-3">
        <nav class="navbar bg-light">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="/"><i class="fa fa-home"></i>Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"
                ><i class="fa fa-shopping-bag"></i>Best Selling</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"
                ><i class="fa fa-plus-square"></i>New Arrivals</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"
                ><i class="fa fa-female"></i>Fashion & Beauty</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"
                ><i class="fa fa-child"></i>Kids & Babies Clothes</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"
                ><i class="fa fa-tshirt"></i>Men & Women Clothes</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"
                ><i class="fa fa-mobile-alt"></i>Gadgets & Accessories</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"
                ><i class="fa fa-microchip"></i>Electronics & Accessories</a
              >
            </li>
          </ul>
        </nav>
      </div>
      <div class="col-md-9">
        <div class="header-slider normal-slider">
          <div class="header-slider-item">
            <img src="/img2/Men's Collection.jpeg" alt="Slider Image" />
            <div class="header-slider-caption">
              <p>Some text goes here that describes the image</p>
              <a class="btn" href=""
                ><i class="fa fa-shopping-cart"></i>Shop Now</a
              >
            </div>
          </div>
          <div class="header-slider-item">
            <img src="/img2/Nike Mens Shoes Blue (1).jpeg" alt="Slider Image" />
            <div class="header-slider-caption">
              <p>Some text goes here that describes the image</p>
              <a class="btn" href=""
                ><i class="fa fa-shopping-cart"></i>Shop Now</a
              >
            </div>
          </div>
          <div class="header-slider-item">
            <img src="/img2/British Trendy Shoes.jpeg" alt="Slider Image" />
            <div class="header-slider-caption">
              <p>Some text goes here that describes the image</p>
              <a class="btn" href=""
                ><i class="fa fa-shopping-cart"></i>Shop Now</a
              >
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Main Slider End -->

<!-- Brand Start -->
<div class="brand">
  <div class="container-fluid">
    <div class="brand-slider">
      <div class="brand-item"><img src="/img2/brand-1.png" alt="" /></div>
      <div class="brand-item"><img src="/img2/brand-2.png" alt="" /></div>
      <div class="brand-item"><img src="/img2/brand-3.png" alt="" /></div>
      <div class="brand-item"><img src="/img2/brand-4.png" alt="" /></div>
      <div class="brand-item"><img src="/img2/brand-5.png" alt="" /></div>
      <div class="brand-item"><img src="/img2/brand-6.png" alt="" /></div>
    </div>
  </div>
</div>
<!-- Brand End -->

<!-- Feature Start-->
<div class="feature">
  <div class="container-fluid">
    <div class="row align-items-center">
      <div class="col-lg-3 col-md-6 feature-col">
        <div class="feature-content">
          <i class="fab fa-cc-mastercard"></i>
          <h2>Secure Payment</h2>
          <p>Lorem ipsum dolor sit amet consectetur elit</p>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 feature-col">
        <div class="feature-content">
          <i class="fa fa-truck"></i>
          <h2>Worldwide Delivery</h2>
          <p>Lorem ipsum dolor sit amet consectetur elit</p>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 feature-col">
        <div class="feature-content">
          <i class="fa fa-sync-alt"></i>
          <h2>90 Days Return</h2>
          <p>Lorem ipsum dolor sit amet consectetur elit</p>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 feature-col">
        <div class="feature-content">
          <i class="fa fa-comments"></i>
          <h2>24/7 Support</h2>
          <p>Lorem ipsum dolor sit amet consectetur elit</p>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Feature End-->

<!-- Category Start-->
<div class="category">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-3">
        <div class="category-item ch-400">
          <img src="/img2/797ce171-9e15-4505-8d15-3565090c424d.jpeg" />
          <a class="category-name" href="">
            <p>Some text goes here that describes the image</p>
          </a>
        </div>
      </div>
      <div class="col-md-3">
        <div class="category-item ch-250">
          <img src="/img2/Men loafer.jpeg" />
          <a class="category-name" href="">
            <p>Some text goes here that describes the image</p>
          </a>
        </div>
        <div class="category-item ch-150">
          <img src="/img2/Tomford.jpeg" />
          <a class="category-name" href="">
            <p>Some text goes here that describes the image</p>
          </a>
        </div>
      </div>
      <div class="col-md-3">
        <div class="category-item ch-150">
          <img src="/img2/d8dba3b3-9ab7-4bce-9606-d65b21a28ca6.jpeg" />
          <a class="category-name" href="">
            <p>Some text goes here that describes the image</p>
          </a>
        </div>
        <div class="category-item ch-250">
          <img src="/img2/41be01f6-c23a-40fc-b75e-fe38bd163421.jpeg" />
          <a class="category-name" href="">
            <p>Some text goes here that describes the image</p>
          </a>
        </div>
      </div>
      <div class="col-md-3">
        <div class="category-item ch-400">
          <img src=" /img2/7340c4ea-885e-45c4-8f14-2465ce5f4b54.jpeg" />
          <a class="category-name" href="">
            <p>Some text goes here that describes the image</p>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Category End-->

<!-- Call to Action Start -->
<div class="call-to-action">
  <div class="container-fluid">
    <div class="row align-items-center">
      <div class="col-md-6">
        <h1>call us for any queries</h1>
      </div>
      <div class="col-md-6">
        <a href="tel:0123456789">+19 1234567890</a>
      </div>
    </div>
  </div>
</div>
<!-- Call to Action End -->

<!-- Featured Product Start -->
<div class="featured-product product">
  <div class="container-fluid">
    <div class="section-header">
      <h1>Featured Product</h1>
    </div>
    <div class="row align-items-center product-slider product-slider-4">
      <% locals.products.forEach((product)=>{ %> <% if(
      product.isActive===true){%>
        <div class="col-lg-3" style="width: 450px;">
          <div class="product-item  ">
            <div class="product-title rounded-top">
  
  
              <div class="ratting d-flex justify-content-between">
                <div>
                  <i class="fa fa-star"></i>
                  <i class="fa fa-star"></i>
                  <i class="fa fa-star"></i>
                  <i class="fa fa-star"></i>
                  <i class="fa fa-star"></i>
                </div>
               
                <% if (product.totalQuantity == 0 ) { %>
                <span class="badge badge-danger"> Out Of Stock</span>
                <% } else if (product.totalQuantity < 10) { %>
                <span class="badge badge-warning">Limited Stock</span>
                <% } else { %>
                <span class="badge badge-success">In Stock</span>
                <% } %>
              </div>
            </div>
            <div class="product-image">
              <a href="product-detail.html">
                <img src="<%= product.imagePaths[0] %>" alt="Product Image" />
              </a>
              <div class="product-action">
  
             <a href="#" tabindex="0" class="addToWishlist" data-id="<%= product._id %>" data-toggle="tooltip" title="wishlist">
                <i class="fa fa-heart"></i>
              </a>
                <a
                  href="/product/<%= product._id %>"
                  tabindex="0"
                  data-toggle="tooltip"
                  title="view"
                  ><i class="fa fa-search"></i
                ></a>
  
              </div>
            </div>
            <div class="product-price rounded-bottom">
              <div class="d-flex justify-content-between">
                <div>
                  <span><b><%= product.name %></b></span>
                </div>
                <div>
                  <span class="badge badge-light"><%= product.brand.name %></span>
                </div>
              </div>
              <div class="text-dark">
                <%
                function capitalizeFirstLetter(string) {
                  return string.charAt(0).toUpperCase() + string.slice(1);
                }
                %>
                <span><%= capitalizeFirstLetter(product.category.name.toLowerCase()) %>'s <%= capitalizeFirstLetter(product.tag.tagName.toLowerCase()) %> Shoe</span>
                            </div>
              <% if (product.offerAmount) { %>
              <h6 class="text-dark">
                $ <%= product.offerAmount %>&nbsp;&nbsp;
                <span style="text-decoration: line-through; color: crimson"
                  ><%= product.basePrice %></span
                >
              </h6>
              <% } else { %>
                <h6 class="text-dark"><span>$</span><%= product.basePrice %></h6>
                <% } %>
              <!-- <a class="btn" href=""><i class="fa fa-shopping-cart"></i>Buy Now</a> -->
            </div>
          </div>
        </div>   
      <%}%> <%})%>
    </div>
  </div>
</div>
<!-- Featured Product End -->

<!-- Recent Product Start -->
<div class="recent-product product">
  <div class="container-fluid">
    <div class="section-header">
      <h1>Recent Product</h1>
    </div>
    <div class="row align-items-center product-slider product-slider-4">
      <% locals.products.forEach((product)=>{ %> <% if(
      product.isActive===true){%>
      <div class="col-lg-3" style="width: 450px;">
        <div class="product-item  ">
          <div class="product-title rounded-top">


            <div class="ratting d-flex justify-content-between">
              <div>
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
              </div>
             
              <% if (product.totalQuantity == 0 ) { %>
              <span class="badge badge-danger"> Out Of Stock</span>
              <% } else if (product.totalQuantity < 10) { %>
              <span class="badge badge-warning">Limited Stock</span>
              <% } else { %>
              <span class="badge badge-success">In Stock</span>
              <% } %>
            </div>
          </div>
          <div class="product-image">
            <a href="product-detail.html">
              <img src="<%= product.imagePaths[0] %>" alt="Product Image" />
            </a>
            <div class="product-action">
              <a href="#" tabindex="0" class="addToWishlist" data-id="<%= product._id %>" data-toggle="tooltip" title="wishlist">
                <i class="fa fa-heart"></i>
              </a>
              <a
                href="/product/<%= product._id %>"
                tabindex="0"
                data-toggle="tooltip"
                title="view"
                ><i class="fa fa-search"></i
              ></a>
            </div>
          </div>
          <div class="product-price rounded-bottom">
            <div class="d-flex justify-content-between">
              <div>
                <span><b><%= product.name %></b></span>
              </div>
              <div>
                <span class="badge badge-light"><%= product.brand.name %></span>
              </div>
            </div>
            <div class="text-dark">
              <%
              function capitalizeFirstLetter(string) {
                return string.charAt(0).toUpperCase() + string.slice(1);
              }
              %>
              <span><%= capitalizeFirstLetter(product.category.name.toLowerCase()) %>'s <%= capitalizeFirstLetter(product.tag.tagName.toLowerCase()) %> Shoe</span>
                          </div>
            <% if (product.offerAmount) { %>
            <h6 class="text-dark">
              $ <%= product.offerAmount %>&nbsp;&nbsp;
              <span style="text-decoration: line-through; color: crimson"
                ><%= product.basePrice %></span
              >
            </h6>
            <% } else { %>
              <h6 class="text-dark"><span>$</span><%= product.basePrice %></h6>
              <% } %>
            <!-- <a class="btn" href=""><i class="fa fa-shopping-cart"></i>Buy Now</a> -->
          </div>
        </div>
      </div>   
      <%}%> <%})%>
    </div>
  </div>
</div>
<!-- Recent Product End -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="/frond-end-JS/home.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
<%- include('../userPartials/footer'); %>
<script>
document.addEventListener("DOMContentLoaded", () => {


  const showInfoToast = (message) => {
      toastr.options = {
        "positionClass": "toast-top-center",
        "timeOut": "3000",
        "closeButton": true,
      };
      toastr.info(message);
    };

    const showErrorToast = (message) => {
    toastr.options = {
        "positionClass": "toast-top-center",
        "timeOut": "3000",
        "closeButton": true,
      };
      toastr.error(message);
    }
  
    const showSuccessToast = (message) => {
    toastr.options = {
        "positionClass": "toast-top-center",
        "timeOut": "3000",
        "closeButton": true,
      };
      toastr.success(message);
    }
  

  const addToWishlistButtons = document.querySelectorAll('.addToWishlist');
  addToWishlistButtons.forEach(item => {
    item.addEventListener('click', async (e) => {
      e.preventDefault();
      const productId = item.dataset.id;
      try {
        const response = await fetch('/add-wishlist', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ productId })
        });

        const data = await response.json();
        console.log("data", data);
        if (response.ok) {
          showSuccessToast("item added wishlist successfully");
        }else{
          showErrorToast(`${data.message}`);
        }


      } catch (error) {
        console.log(error);
      showErrorToast("Failed to add to wishlist");
      }
    });
  });
});

</script>
